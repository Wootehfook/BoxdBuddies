/* Linux-specific fixes for BoxdBuddies */

/* Fix emoji display issues on Linux */
body {
  font-family:
    "Open Sans", Arial, sans-serif, "Noto Color Emoji", "Apple Color Emoji",
    "Segoe UI Emoji";
}

/* Reduce shimmer animations that cause flicker on Linux */
@media (prefers-reduced-motion: no-preference) {
  /* Detect Linux by checking for common Linux-specific CSS features */
  @supports (-webkit-appearance: none) and (not (-webkit-touch-callout: none)) {
    /* Reduce shimmer intensity */
    .progress-bar-fill-modern::before {
      animation: progressTopShimmer 6s ease-in-out infinite !important;
      opacity: 0.3 !important;
    }

    .loading-skeleton {
      animation: skeletonShimmer 3s ease-in-out infinite !important;
      opacity: 0.5 !important;
    }

    .btn.loading::after {
      animation: buttonShimmer 3s ease-in-out infinite !important;
      opacity: 0.4 !important;
    }

    .progress-bar-fill::before {
      animation: progressShimmer 4s ease-in-out infinite !important;
      opacity: 0.3 !important;
    }

    .progress-percentage-modern {
      animation: none !important;
    }
  }
}

/* Alternative emoji fallbacks for Linux */
.movie-detail-item .detail-icon {
  font-family:
    "Noto Color Emoji", "Apple Color Emoji", "Segoe UI Emoji", monospace;
  display: inline-block;
  text-rendering: optimizeLegibility;
  -webkit-font-feature-settings: "liga";
  font-feature-settings: "liga";
}

/* Fallback for missing emoji fonts */
.movie-detail-item .detail-icon::before {
  content: "";
  display: inline-block;
  width: 1em;
  height: 1em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

/* Fallback icon images â€” prefer adding marker classes in markup
   instead of relying on unsupported selectors like `:has()` and
   `:contains()`. Example: add `.has-director`, `.has-genre`,
   `.has-rating` to `.movie-detail-item` in JSX/TSX when appropriate. */

.movie-detail-item.has-director .detail-icon::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff8000'%3E%3Cpath d='M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z'/%3E%3C/svg%3E");
}

.movie-detail-item.has-genre .detail-icon::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff8000'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm5 8c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5zm5-6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z'/%3E%3C/svg%3E");
}

.movie-detail-item.has-rating .detail-icon::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff8000'%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3C/svg%3E");
}

/* Pin button improvements for Linux */
.btn-pin {
  transition: all 0.2s ease !important;
}

.btn-pin:hover {
  transform: none !important; /* Disable transform animations that might flicker */
  background-color: rgba(255, 128, 0, 0.2) !important;
}

/* Disable GPU acceleration for animations on Linux to reduce flicker */
.progress-bar-fill-modern,
.loading-skeleton,
.btn.loading::after,
.progress-bar-fill {
  transform: translateZ(0) !important;
  will-change: auto !important;
}
